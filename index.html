<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Calculadora de Circuitos</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- <link rel="stylesheet" href="static/plugins/fontawesome-free/all.min.css">
  <link rel="stylesheet" href="static/dist/css/adminlte.min.css"> -->

    <link rel="stylesheet" href="static/css/reset.css">
    <link rel="stylesheet" href="static/css/main.css">
    <link rel="stylesheet" href="static/css/styles.css">

    <link rel="stylesheet" href="static/css/styles.css">
    <style>
        .badge {
            font-size: 15px;
            text-align: center;
        }
    </style>

</head>

<body>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="/">Calculadora</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Calculo de Queda de Tensão</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Usuários</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Entrar</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Sobre nós</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Sair</a>
                    </li>

                </ul>
            </div>
        </nav>

        <div class="content-wrapper" style="min-height: 1302.12px;">

            <div class="card-body">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th style="width: 10px">#</th>
                            <th>Dados do Circuito</th>
                            <th>Dados</th>
                            <th style="width: 40px">Unidade</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1.</td>
                            <td>Tensão Nominal (Vn)</td>
                            <td>
                                <input type="number" class="form-control" id="nominalTension" placeholder="0">
                            </td>
                            <td><span class="badge">kV</span></td>
                        </tr>
                        <tr>
                            <td>2.</td>
                            <td>Corrente Nominal (In)</td>
                            <td>
                                <input type="number" class="form-control rounded-0" id="nominalCorrent" placeholder="0">
                            </td>
                            <td><span class="badge">A</span></td>
                        </tr>
                        <tr>
                            <td>3.</td>
                            <td>Fator de Potência (fP)</td>
                            <td>
                                <input type="text" class="form-control rounded-0" id="potencialFactor" value="1">
                            </td>
                            <td><span class="badge">-</span></td>
                        </tr>
                        <tr>
                            <td>4.</td>
                            <td>Corrente de Dimensionamento (Idim)</td>
                            <td>
                                <input type="number" class="form-control rounded-0" id="dimensionCorrent" readonly>
                            </td>
                            <td><span class="badge">A</span></td>
                        </tr>
                        <tr>
                            <td>5.</td>
                            <td>Queda de Tensão Admissível</td>
                            <td>
                                <input type="number" class="form-control rounded-0" id="dropTension" value="3">
                            </td>
                            <td><span class="badge">%</span></td>
                        </tr>
                        <tr>
                            <td>6.</td>
                            <td>Comprimento do Circuito (L)</td>
                            <td>
                                <input type="number" class="form-control rounded-0" id="circuitLenght" placeholder="0">
                            </td>
                            <td><span class="badge">m</span></td>
                        </tr>
                        <tr>
                            <td>7.</td>
                            <td>Resistência do Cabo (R)</td>
                            <td>
                                <input type="number" class="form-control rounded-0" id="cableR" placeholder="0.000"
                                    readonly>
                            </td>
                            <td><span class="badge">ohm/km</span></td>
                        </tr>
                        <td>8.</td>
                        <td>Reatância do Cabo (X)</td>
                        <td>
                            <input type="number" class="form-control rounded-0" id="cableX" placeholder="0.000"
                                readonly>
                        </td>
                        <td><span class="badge">ohm/km</span></td>
                        </tr>
                        <td>9.</td>
                        <td>Cabos por Fase</td>
                        <td>
                            <input type="number" class="form-control rounded-0" id="cableFase" value="1">
                        </td>
                        <td><span class="badge">-</span></td>
                        </tr>
                        <td>10.</td>
                        <td>Queda de Tensão Exercida</td>
                        <td>
                            <input type="num" class="form-control rounded-0" id="dropTensionE" placeholder="0" readonly>
                        </td>
                        <td><span class="badge">%</span></td>
                        </tr>
                        <td>11.</td>
                        <td>Seção Adotada</td>
                        <td>
                            <select class="form-control select2 select2-hidden-accessible" id="sectionAdopeted"
                                style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true">
                                <option selected="selected" data-select-id="0">-</option>
                                <option data-select-id="0,5">0,5</option>
                                <option data-select-id="1">1</option>
                                <option data-select-id="1,5">1,5</option>
                                <option data-select-id="2,5">2,5</option>
                                <option data-select-id="4">4</option>
                                <option data-select-id="6">6</option>
                                <option data-select-id="10">10</option>
                                <option data-select-id="16">16</option>
                                <option data-select-id="25">25</option>
                                <option data-select-id="35">35</option>
                                <option data-select-id="50">50</option>
                                <option data-select-id="70">70</option>
                                <option data-select-id="95">95</option>
                                <option data-select-id="100">100</option>
                                <option data-select-id="120">120</option>
                                <option data-select-id="150">150</option>
                                <option data-select-id="185">185</option>
                                <option data-select-id="240">240</option>
                                <option data-select-id="300">300</option>
                        </td>
                        <td><span class="badge">mm²</span></td>
                        </tr>
                    </tbody>
                </table>
                <button onclick="calcCirc()">Calcular</button>

            </div>
        </div>

        <footer>
            <p>Dimensionamento Elétricos</p>
        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.0.min.js"
        integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg=" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"
        integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o"
        crossorigin="anonymous"></script>
    <!--<script src="static/js/scripts.js"></script>-->

    <script>

        var lista = [
            ["0,5", 14.5000, 0.1100], //
            ["1", 19.5000, 0.3100], //
            ["1,5", 13.3000, 0.4100], //
            ["2,5", 7.9800, 0.4100], //
            ["4", 4.9500, 0.5100], //
            ["6", 3.3000, 0.5100], //
            ["10", 1.9100, 0.5100], //
            ["16", 1.2100, 0.6100], //
            ["25", 0.7800, 0.6100], //
            ["35", 0.5540, 0.6800], //
            ["50", 0.3860, 0.6800], //
            ["70", 0.2720, 0.6800], //
            ["95", 0.2060, 0.6800], //
            ["120", 0.1610, 0.6800], //
            ["150", 0.1290, 0.8600], //
            ["185", 0.1000, 0.8600], //
            ["240", 0.0801, 0.8600], //
            ["300", 0.0641, 0.8600]  //
        ];

        console.log(lista);

        //------------
        let cableR = document.getElementById("cableR");
        let cableX = document.getElementById("cableX");

        let elementSected = document.getElementById("sectionAdopeted");

        console.log("Cable: ", cableR, cableX);

        elementSected.addEventListener("change", function () {
            let selectedValue = elementSected.value;
            let varCol1;
            let varCol2;

            for (var i = 0; i < lista.length; i++) {
                var sublista = lista[i];
                var varCol0 = sublista[0];

                if (varCol0 === selectedValue) {
                    varCol1 = sublista[1];
                    varCol2 = sublista[2];
                    break;
                }
            }

            console.log("A: ", varCol1);
            console.log("B: ", varCol2);

            cableR.value = varCol1;
            cableX.value = varCol2;

            console.log("Valor da coluna 1: " + selectedValue);
        });


        function calcCirc() {
            let nominalTension = parseFloat(document.getElementById("nominalTension").value);
            let nominalCorrent = parseFloat(document.getElementById("nominalCorrent").value);
            let potencialFactor = parseFloat(document.getElementById("potencialFactor").value);
            let dimensionCorrent = document.getElementById("dimensionCorrent")
            let dropTension = parseFloat(document.getElementById("dropTension").value);
            let circuitLenght = parseFloat(document.getElementById("circuitLenght").value);
            let cableR = parseFloat(document.getElementById("cableR").value);
            let cableX = parseFloat(document.getElementById("cableR").value);
            let cableFase = parseFloat(document.getElementById("cableFase").value);
            let dropTensionE = document.getElementById("dropTensionE");

            let idim = ((nominalCorrent * 37) / 100) + nominalCorrent

            let result = 2 * idim * (cableR * potencialFactor + cableX * Math.sin(Math.acos(potencialFactor))) * circuitLenght / 100 / cableFase / (nominalTension / 10);
            //let result = (2 * idim * ((((cableR * potencialFactor) + (cableX * Math.sin(Math.acos(potencialFactor))))) * circuitLenght) / 1000 / cableFase) / (nominalTension * 1000);

            console.log('Result: ', result);
            dimensionCorrent.value = idim;
            dropTensionE.value = result.toFixed(2);
            dropTensionE.style.fontWeight = "bold";
            dropTensionE.style.color = "rgb(255, 255, 255)";

            if (result < dropTension) {
                dropTensionE.style.backgroundColor = "rgb(41, 154, 45)";
            } else {
                dropTensionE.style.backgroundColor = "rgb(255, 1, 69)"; //red
            }

        }

    </script>

</body>

</html>